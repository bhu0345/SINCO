# ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ - æ‰“åŒ…è¯´æ˜

## å¿«é€Ÿå¼€å§‹

### Mac ç”¨æˆ·

1. æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹
2. è¿è¡Œæ‰“åŒ…è„šæœ¬ï¼š
   ```bash
   chmod +x build_app.sh
   ./build_app.sh
   ```
3. å®Œæˆåï¼Œåœ¨ `dist` æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°åº”ç”¨

### Windows ç”¨æˆ·

1. åŒå‡»è¿è¡Œ `build_app.bat`
2. å®Œæˆåï¼Œåœ¨ `dist` æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°åº”ç”¨

---

## è¯¦ç»†è¯´æ˜

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨æ‰“åŒ…è„šæœ¬ï¼ˆæ¨èï¼‰

æœ€ç®€å•çš„æ–¹æ³•ï¼Œå·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†è„šæœ¬ï¼š
- **Mac**: `build_app.sh`
- **Windows**: `build_app.bat`

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æ‰“åŒ…

å¦‚æœè„šæœ¬ä¸å·¥ä½œï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œï¼š

#### 1. å®‰è£… PyInstaller
```bash
pip install pyinstaller
```

#### 2. æ‰“åŒ…åº”ç”¨

**ç®€å•æ¨¡å¼ï¼ˆå•ä¸ªæ–‡ä»¶å¤¹ï¼‰ï¼š**
```bash
pyinstaller --name="ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ" --windowed --onedir main.py
```

**å•æ–‡ä»¶æ¨¡å¼ï¼ˆå¯åŠ¨è¾ƒæ…¢ï¼Œä½†åªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼‰ï¼š**
```bash
pyinstaller --name="ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ" --windowed --onefile main.py
```

#### 3. æŸ¥æ‰¾åº”ç”¨

æ‰“åŒ…å®Œæˆåï¼š
- **Mac**: `dist/ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ.app` æˆ– `dist/ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ/`
- **Windows**: `dist/ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ/ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ.exe`

---

## å‚æ•°è¯´æ˜

- `--name`: åº”ç”¨åç§°
- `--windowed`: GUIæ¨¡å¼ï¼ˆä¸æ˜¾ç¤ºé»‘è‰²ç»ˆç«¯çª—å£ï¼‰
- `--onedir`: æ‰“åŒ…æˆæ–‡ä»¶å¤¹ï¼ˆæ¨èï¼Œå¯åŠ¨å¿«ï¼‰
- `--onefile`: æ‰“åŒ…æˆå•ä¸ªexeæ–‡ä»¶ï¼ˆä½“ç§¯å¤§ï¼Œå¯åŠ¨æ…¢ï¼‰
- `--clean`: æ¸…ç†ä¹‹å‰çš„æ„å»º
- `--icon`: è‡ªå®šä¹‰åº”ç”¨å›¾æ ‡ï¼ˆå¯é€‰ï¼‰

---

## æ·»åŠ è‡ªå®šä¹‰å›¾æ ‡ï¼ˆå¯é€‰ï¼‰

### 1. å‡†å¤‡å›¾æ ‡æ–‡ä»¶
- **Mac**: éœ€è¦ `.icns` æ ¼å¼
- **Windows**: éœ€è¦ `.ico` æ ¼å¼

### 2. åœ¨çº¿è½¬æ¢å·¥å…·
- https://convertio.co/zh/png-ico/
- https://cloudconvert.com/png-to-icns

### 3. ä½¿ç”¨å›¾æ ‡æ‰“åŒ…
```bash
# Mac
pyinstaller --name="ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ" --windowed --onedir --icon=app_icon.icns main.py

# Windows
pyinstaller --name="ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ" --windowed --onedir --icon=app_icon.ico main.py
```

---

## åˆ†å‘åº”ç”¨

### Mac

**æ–¹æ³•1: ç›´æ¥åˆ†äº« .app æ–‡ä»¶**
1. å³é”®ç‚¹å‡» `ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ.app`
2. é€‰æ‹©"å‹ç¼©"
3. åˆ†äº« `.zip` æ–‡ä»¶

**æ–¹æ³•2: åˆ›å»º .dmg å®‰è£…åŒ…**
```bash
# å®‰è£…å·¥å…·
pip install dmgbuild

# åˆ›å»º DMGï¼ˆéœ€è¦é¢å¤–é…ç½®æ–‡ä»¶ï¼‰
hdiutil create -volname "ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ" -srcfolder dist/ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ.app -ov -format UDZO ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ.dmg
```

**æ³¨æ„**: Macç”¨æˆ·é¦–æ¬¡è¿è¡Œå¯èƒ½ä¼šé‡åˆ°"æ— æ³•æ‰“å¼€ï¼Œå› ä¸ºæ¥è‡ªèº«ä»½ä¸æ˜çš„å¼€å‘è€…"
- è§£å†³æ–¹æ³•: å³é”®ç‚¹å‡»åº”ç”¨ â†’ é€‰æ‹©"æ‰“å¼€" â†’ ç‚¹å‡»"æ‰“å¼€"æŒ‰é’®

### Windows

**æ–¹æ³•1: åˆ†äº«æ•´ä¸ªæ–‡ä»¶å¤¹**
- å°† `dist/ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ/` æ•´ä¸ªæ–‡ä»¶å¤¹å‹ç¼©æˆ `.zip`
- åˆ†äº«ç»™å…¶ä»–äººè§£å‹åè¿è¡Œ

**æ–¹æ³•2: åˆ›å»ºå®‰è£…ç¨‹åºï¼ˆé«˜çº§ï¼‰**
ä½¿ç”¨ Inno Setup æˆ– NSIS åˆ›å»ºä¸“ä¸šçš„å®‰è£…ç¨‹åº

---

## å¸¸è§é—®é¢˜

### Q1: åº”ç”¨å¯åŠ¨å¾ˆæ…¢ï¼Ÿ
- ä½¿ç”¨ `--onedir` è€Œä¸æ˜¯ `--onefile`
- æ·»åŠ åˆ°æ€æ¯’è½¯ä»¶ç™½åå•

### Q2: æ‰“åŒ…åä½“ç§¯å¾ˆå¤§ï¼Ÿ
- æ­£å¸¸çš„ï¼ŒåŒ…å«äº†æ•´ä¸ªPythonè¿è¡Œæ—¶
- é€šå¸¸ 50-150MB æ˜¯æ­£å¸¸çš„
- å¯ä»¥ç”¨ UPX å‹ç¼©ï¼ˆé£é™©æ˜¯å¯èƒ½è¢«è¯¯æŠ¥ä¸ºç—…æ¯’ï¼‰

### Q3: Mac æç¤º"å·²æŸå"ï¼Ÿ
è¿è¡Œå‘½ä»¤ï¼š
```bash
sudo xattr -rd com.apple.quarantine dist/ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ.app
```

### Q4: ç¼ºå°‘æ¨¡å—é”™è¯¯ï¼Ÿ
åœ¨æ‰“åŒ…æ—¶æ·»åŠ éšè—å¯¼å…¥ï¼š
```bash
pyinstaller --hidden-import=æ¨¡å—å --windowed main.py
```

---

## å…¶ä»–æ‰“åŒ…å·¥å…·ï¼ˆå¤‡é€‰ï¼‰

### 1. **py2app**ï¼ˆä»…Macï¼‰
```bash
pip install py2app
py2applet --make-setup main.py
python setup.py py2app
```

### 2. **cx_Freeze**ï¼ˆè·¨å¹³å°ï¼‰
```bash
pip install cx_Freeze
cxfreeze main.py --target-dir dist
```

### 3. **Nuitka**ï¼ˆç¼–è¯‘ä¸ºæœºå™¨ç ï¼Œä½“ç§¯å°ï¼Œä½†å¤æ‚ï¼‰
```bash
pip install nuitka
python -m nuitka --standalone --onefile --enable-plugin=tk-inter main.py
```

---

## æ¨èé…ç½®æ–‡ä»¶

åˆ›å»º `MVP.spec` æ–‡ä»¶è¿›è¡Œé«˜çº§é…ç½®ï¼š

```python
# -*- mode: python ; coding: utf-8 -*-

block_cipher = None

a = Analysis(
    ['main.py'],
    pathex=[],
    binaries=[],
    datas=[],
    hiddenimports=[],
    hookspath=[],
    hooksconfig={},
    runtime_hooks=[],
    excludes=[],
    win_no_prefer_redirects=False,
    win_private_assemblies=False,
    cipher=block_cipher,
    noarchive=False,
)

pyz = PYZ(a.pure, a.zipped_data, cipher=block_cipher)

exe = EXE(
    pyz,
    a.scripts,
    [],
    exclude_binaries=True,
    name='ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ',
    debug=False,
    bootloader_ignore_signals=False,
    strip=False,
    upx=True,
    console=False,  # GUIåº”ç”¨ï¼Œä¸æ˜¾ç¤ºæ§åˆ¶å°
    disable_windowed_traceback=False,
    argv_emulation=False,
    target_arch=None,
    codesign_identity=None,
    entitlements_file=None,
)

coll = COLLECT(
    exe,
    a.binaries,
    a.zipfiles,
    a.datas,
    strip=False,
    upx=True,
    upx_exclude=[],
    name='ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ',
)

app = BUNDLE(
    coll,
    name='ç”Ÿäº§äº¤æœŸé¢„æµ‹ç³»ç»Ÿ.app',
    icon=None,
    bundle_identifier='com.yourcompany.eta-system',
)
```

ç„¶åè¿è¡Œï¼š
```bash
pyinstaller MVP.spec
```

---

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ `build/` æ–‡ä»¶å¤¹ä¸­çš„æ—¥å¿—
2. ä½¿ç”¨ `--debug all` å‚æ•°è·å–è¯¦ç»†ä¿¡æ¯
3. æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä¾èµ–éƒ½å·²å®‰è£…

ç¥æ‰“åŒ…é¡ºåˆ©ï¼ğŸ‰
